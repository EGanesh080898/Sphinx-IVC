# File: .bazelrc

# ===================================================================
# Platform configurations for ACRN vs QNX
# To build for acrn (default): bazel build //...
# To build for qnx: bazel build --config=qnx //...
# ===================================================================

# Common flags for all builds
build --cxxopt="-std=c++17"
build --cxxopt="-Wall"
build --linkopt="-rdynamic"

# --- ACRN Platform (Default) ---
# Defines the configuration 'acrn' which is active by default
build:acrn --cxxopt="-DACRN_HV_PLATFORM"

# --- QNX Platform ---
# Defines a new configuration named 'qnx'
build:qnx --cxxopt="-DQNX_HV_PLATFORM"

# ===================================================================
# Debug vs Release builds
# To build in debug mode: bazel build -c dbg //...
# To build in release mode: bazel build -c opt //...
# ===================================================================

# Default debug flags (-g is automatically added by Bazel for -c dbg)
build:dbg --copt="-Wall"

# Default release flags (-s for stripping symbols is added by Bazel for -c opt)
build:opt --copt="-Wall"
